# Project Management API

This project is a Project Management API built with Django and Django REST Framework. It allows users to manage projects, tasks, and comments with full CRUD functionality and JWT authentication.

## Table of Contents

- [Features](#features)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Configuration](#configuration)
- [Database Migrations](#database-migrations)
- [Running the Server](#running-the-server)
- [API Documentation](#api-documentation)
- [Usage](#usage)
  - [Authentication](#authentication)
  - [API Endpoints](#api-endpoints)
- [Testing the API](#testing-the-api)
- [License](#license)

---

## Features

- User registration and authentication using JWT.
- CRUD operations for Users, Projects, Tasks, and Comments.
- Nested routing for Projects, Tasks, and Comments.
- Permissions and authentication checks.
- API documentation using Swagger (drf-yasg).

---

## Prerequisites

Before you begin, ensure you have the following installed on your system:

- Python 3.7 or higher
- pip (Python package manager)
- virtualenv (optional but recommended)
- Git (to clone the repository)
- SQLite (default database, no setup required)

---

## Installation

### 1. Clone the Repository

```bash
git clone https://github.com/yourusername/project-management-api.git
cd project-management-api
```

### 2. Create a Virtual Environment (Optional but Recommended)

```bash
python -m venv venv
```

Activate the virtual environment:

- On Windows:

  ```bash
  venv\Scripts\activate
  ```

- On macOS and Linux:

  ```bash
  source venv/bin/activate
  ```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

If you don't have a `requirements.txt` file, you can install the necessary packages manually:

```bash
pip install django djangorestframework djangorestframework-simplejwt drf-yasg drf-nested-routers django-filter
```

---

## Configuration

### 1. Set Up the Django Project

If the project is not set up yet, you can create it:

```bash
django-admin startproject project_management
cd project_management
python manage.py startapp management_app
```

### 2. Update `settings.py`

In `project_management/settings.py`:

- Add `'management_app'`, `'rest_framework'`, `'rest_framework.authtoken'`, and `'drf_yasg'` to `INSTALLED_APPS`.

```python
INSTALLED_APPS = [
    # ...
    'rest_framework',
    'rest_framework.authtoken',
    'drf_yasg',
    'management_app',
]
```

- Set up the custom user model:

```python
AUTH_USER_MODEL = 'management_app.User'
```

- Configure REST framework settings:

```python
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework_simplejwt.authentication.JWTAuthentication',
    ),
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAuthenticated',
    ),
    'DEFAULT_FILTER_BACKENDS': ['django_filters.rest_framework.DjangoFilterBackend'],
}
```

### 3. Configure URLs

In `project_management/urls.py`:

```python
from django.contrib import admin
from django.urls import path, include, re_path
from rest_framework import permissions
from drf_yasg.views import get_schema_view
from drf_yasg import openapi

schema_view = get_schema_view(
    openapi.Info(
        title="Project Management API",
        default_version='v1',
        description="API documentation for the Project Management application",
        terms_of_service="https://www.example.com/terms/",
        contact=openapi.Contact(email="support@example.com"),
        license=openapi.License(name="BSD License"),
    ),
    public=True,
    permission_classes=(permissions.AllowAny,),
)

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('management_app.urls')),
    # Swagger UI
    re_path(r'^swagger(?P<format>\.json|\.yaml)$', schema_view.without_ui(cache_timeout=0), name='schema-json'),
    path('swagger/', schema_view.with_ui('swagger', cache_timeout=0), name='schema-swagger-ui'),
    # ReDoc UI
    path('redoc/', schema_view.with_ui('redoc', cache_timeout=0), name='schema-redoc'),
]
```

---

## Database Migrations

Apply the migrations to set up the database:

```bash
python manage.py makemigrations
python manage.py migrate
```

---

## Running the Server

Start the Django development server:

```bash
python manage.py runserver
```

The server will be running at `http://127.0.0.1:8000/`.

---

## API Documentation

You can access the interactive API documentation generated by Swagger at:

- **Swagger UI:** [http://127.0.0.1:8000/swagger/](http://127.0.0.1:8000/swagger/)
- **ReDoc UI:** [http://127.0.0.1:8000/redoc/](http://127.0.0.1:8000/redoc/)

These interfaces allow you to explore the API endpoints, view request and response schemas, and make test requests.

---

## Usage

### Authentication

The API uses JWT (JSON Web Tokens) for authentication. You need to obtain a token by logging in and include it in the `Authorization` header of your requests.

#### 1. Register a New User

**Endpoint:** `POST /api/users/register/`

**Payload:**

```json
{
  "username": "your_username",
  "email": "your_email@example.com",
  "password": "your_password",
  "first_name": "YourFirstName",
  "last_name": "YourLastName"
}
```

#### 2. Obtain a JWT Token

**Endpoint:** `POST /api/users/login/`

**Payload:**

```json
{
  "username": "your_username",
  "password": "your_password"
}
```

**Response:**

```json
{
  "refresh": "your_refresh_token",
  "access": "your_access_token"
}
```

#### 3. Use the Access Token

Include the access token in the `Authorization` header of your requests:

```
Authorization: Bearer your_access_token
```

### API Endpoints

Below are the main API endpoints. For detailed information, refer to the Swagger documentation.

#### Users

- **Register User:** `POST /api/users/register/`
- **Login User:** `POST /api/users/login/`
- **Get User Details:** `GET /api/users/{id}/`
- **Update User:** `PUT/PATCH /api/users/{id}/`
- **Delete User:** `DELETE /api/users/{id}/`

#### Projects

- **List Projects:** `GET /api/projects/`
- **Create Project:** `POST /api/projects/`
- **Retrieve Project:** `GET /api/projects/{id}/`
- **Update Project:** `PUT/PATCH /api/projects/{id}/`
- **Delete Project:** `DELETE /api/projects/{id}/`

#### Tasks

- **List Tasks in a Project:** `GET /api/projects/{project_id}/tasks/`
- **Create Task in a Project:** `POST /api/projects/{project_id}/tasks/`
- **Retrieve Task:** `GET /api/projects/{project_id}/tasks/{id}/`
- **Update Task:** `PUT/PATCH /api/projects/{project_id}/tasks/{id}/`
- **Delete Task:** `DELETE /api/projects/{project_id}/tasks/{id}/`

#### Comments

- **List Comments on a Task:** `GET /api/projects/{project_id}/tasks/{task_id}/comments/`
- **Create Comment on a Task:** `POST /api/projects/{project_id}/tasks/{task_id}/comments/`
- **Retrieve Comment:** `GET /api/projects/{project_id}/tasks/{task_id}/comments/{id}/`
- **Update Comment:** `PUT/PATCH /api/projects/{project_id}/tasks/{task_id}/comments/{id}/`
- **Delete Comment:** `DELETE /api/projects/{project_id}/tasks/{task_id}/comments/{id}/`

---

## Testing the API

You can test the API using tools like:

- **Swagger UI:** Interactive testing via the web interface.
- **cURL:** Command-line tool for sending HTTP requests.
- **Postman:** GUI application for testing APIs.

### Example: Creating a Project via API

**Endpoint:** `POST /api/projects/`

**Headers:**

```
Authorization: Bearer your_access_token
Content-Type: application/json
```

**Payload:**

```json
{
  "name": "Project Alpha",
  "description": "Description of Project Alpha"
}
```

**Response:**

```json
{
  "id": 1,
  "name": "Project Alpha",
  "description": "Description of Project Alpha",
  "owner": {
    "id": 1,
    "username": "your_username",
    "email": "your_email@example.com",
    "first_name": "YourFirstName",
    "last_name": "YourLastName",
    "date_joined": "2024-10-25T12:00:00Z"
  },
  "created_at": "2024-10-25T12:00:00Z"
}
```

---

## Additional Configuration

### Setting Up Admin User

To create a superuser for accessing the Django admin site:

```bash
python manage.py createsuperuser
```

Provide the username, email, and password when prompted.

### Accessing the Admin Site

Start the development server and navigate to:

```
http://127.0.0.1:8000/admin/
```

Log in with your superuser credentials.

### Installing Dependencies from `requirements.txt`

If you have a `requirements.txt` file, ensure it includes:

```
Django>=3.0,<4.0
djangorestframework
djangorestframework-simplejwt
drf-yasg
drf-nested-routers
django-filter
```

Install using:

```bash
pip install -r requirements.txt
```

---

## Common Issues and Solutions

### 1. Import Errors

- Ensure all necessary packages are installed.
- Check for typos in import statements.

### 2. Authentication Errors

- Verify that you're including the JWT access token in the `Authorization` header.
- Tokens expire; use the refresh token to obtain a new access token if needed.

### 3. Migration Errors

- Delete existing migration files and database if necessary.
- Run `python manage.py makemigrations` and `python manage.py migrate` again.

---

## License

This project is licensed under the [MIT License](LICENSE).

---

## Contact

For support or inquiries, please contact [support@example.com](mailto:support@example.com).

---

**Note:** Replace placeholders like `yourusername`, `your_email@example.com`, `your_password`, and `support@example.com` with your actual information.

---

**Happy coding!** If you need further assistance, feel free to reach out.